<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>OurSales ‚Ä¢ Novo Pedido</title>
    <link rel="stylesheet" href="assets/css/style.css" />
  </head>
  <body data-page="pedido-form">
    <header>
      <h1 id="pedidoFormTitle">üõí Pedido - Novo</h1>
      <p>
        Preencha as informa√ß√µes do pedido, adicione produtos e controle o
        faturamento.
      </p>
    </header>

    <nav>
      <div class="nav-inner">
        <a href="index.html" data-page="home">In√≠cio</a>
        <a href="clientes.html" data-page="clientes">Clientes</a>
        <a href="orcamentos.html" data-page="orcamentos">Or√ßamentos</a>
        <a href="pedidos.html" data-page="pedidos">Pedidos</a>
        <a href="produtos.html" data-page="produtos">Produtos</a>
        <a href="crm.html" data-page="crm">CRM</a>
        <a href="configuracoes.html" data-page="configuracoes">‚öôÔ∏è Mais</a>
      </div>
    </nav>

    <main>
      <form id="pedidoForm" autocomplete="off">
        <input type="hidden" id="pedidoId" />

        <!-- A√ß√µes do formul√°rio -->
        <section class="card">
          <div class="hero-actions">
            <button type="submit" id="pedidoSalvar">Salvar</button>
            <button
              type="button"
              id="pedidoSalvarEnviar"
              class="button-secondary"
            >
              Salvar e Enviar
            </button>
            <button
              type="button"
              id="pedidoVisualizar"
              class="button-secondary"
            >
              Visualizar
            </button>
            <a href="pedidos.html" class="button button-danger">Cancelar</a>
            <button
              type="button"
              id="personalizarCampos"
              class="button-secondary"
              style="margin-left: auto"
            >
              ‚öôÔ∏è Personalizar Campos
            </button>
          </div>
        </section>

        <!-- Informa√ß√µes sobre o Pedido -->
        <section class="card">
          <h3>Informa√ß√µes sobre o Pedido</h3>
          <div class="grouped three">
            <label>
              Cliente *
              <div style="display: flex; gap: 0.5rem">
                <input
                  type="text"
                  id="pedidoClienteSearch"
                  placeholder="Raz√£o Social, Nome Fantasia, C√≥digo ou CNPJ/CPF"
                  style="flex: 1"
                />
                <button
                  type="button"
                  id="pedidoClienteProcurar"
                  class="button-secondary"
                >
                  üîç Procurar
                </button>
              </div>
              <select id="pedidoCliente" required style="margin-top: 0.5rem">
                <option value="">Selecione um cliente</option>
              </select>
            </label>
          </div>

          <div class="grouped three">
            <label>
              Comprador
              <select id="pedidoComprador">
                <option value="">Selecione</option>
              </select>
            </label>
            <label>
              Transportadora
              <select id="pedidoTransportadora">
                <option value="">Selecione uma transportadora</option>
              </select>
            </label>
            <label>
              Frete
              <select id="pedidoTipoFrete">
                <option value="">Selecione</option>
                <option value="cif">CIF</option>
                <option value="fob">FOB</option>
                <option value="sem">Sem Frete</option>
              </select>
            </label>
          </div>

          <div class="grouped four">
            <label>
              Dt. Venda *
              <input type="date" id="pedidoDataVenda" required />
            </label>
            <label>
              Previs√£o Entrega
              <div style="display: flex; gap: 0.5rem; align-items: center">
                <input type="date" id="pedidoPrevisaoEntrega" style="flex: 1" />
                <a
                  href="#"
                  id="adicionarAgendaSV"
                  style="
                    font-size: 0.875rem;
                    color: #007bff;
                    text-decoration: none;
                    white-space: nowrap;
                  "
                >
                  üìÖ Adicionar na Agenda SV
                </a>
              </div>
            </label>
            <label>
              Dt. Fatura
              <input type="date" id="pedidoDataFatura" />
            </label>
            <label>
              Nota Fiscal
              <input
                type="text"
                id="pedidoNotaFiscal"
                placeholder="N√∫mero da NF"
              />
            </label>
          </div>
        </section>

        <!-- Itens do Pedido -->
        <section class="card">
          <div class="section-header">
            <div>
              <h3>Itens do Pedido</h3>
            </div>
            <div class="toolbar">
              <button
                type="button"
                id="buscarProdutos"
                class="button-secondary"
              >
                üîç Busca Avan√ßada
              </button>
              <button type="button" id="modoCesta" class="button-secondary">
                üõí Modo Cesta de Compra
              </button>
              <button type="button" id="excluirItem" class="button-danger">
                üóëÔ∏è Excluir item
              </button>
              <button type="button" id="maisAcoes" class="button-secondary">
                ‚ãÆ Mais A√ß√µes
              </button>
            </div>
          </div>

          <div
            class="alert alert-info"
            style="
              margin-bottom: 1rem;
              padding: 0.75rem 1rem;
              background: #fff3cd;
              border: 1px solid #ffc107;
              border-radius: 4px;
              color: #856404;
            "
          >
            ‚ö†Ô∏è Agora o campo de importa√ß√£o de produtos est√° dentro de Mais
            A√ß√µes.
          </div>

          <div class="search-product-container">
            <input
              type="text"
              id="produtoSearch"
              placeholder="Nome do produto, c√≥digo/c√≥digo original ou EAN"
              class="search-product-input"
            />
            <button
              type="button"
              id="adicionarProduto"
              class="button-secondary"
            >
              ‚ûï Adicionar
            </button>
          </div>

          <!-- Filtros de quantidade -->
          <div
            class="quantity-filters"
            style="
              display: flex;
              gap: 0.5rem;
              margin-top: 1rem;
              align-items: center;
            "
          >
            <input
              type="number"
              placeholder="0"
              style="width: 60px"
              id="filtro1"
            />
            <input
              type="number"
              placeholder="0"
              style="width: 60px"
              id="filtro2"
            />
            <input
              type="number"
              placeholder="0"
              style="width: 60px"
              id="filtro3"
            />
            <input
              type="number"
              placeholder="0"
              style="width: 60px"
              id="filtro4"
            />
            <input
              type="number"
              placeholder="0"
              style="width: 60px"
              id="filtro5"
            />
            <input
              type="number"
              placeholder="0"
              style="width: 60px"
              id="filtro6"
            />
            <input
              type="number"
              placeholder="0"
              style="width: 60px"
              id="filtro7"
            />
            <button type="button" id="aplicarFiltros" class="button-secondary">
              Aplicar
            </button>
            <button type="button" id="limparFiltros" class="button-secondary">
              Limpar %
            </button>
          </div>

          <div class="table-wrapper" style="margin-top: 1rem">
            <table>
              <thead>
                <tr>
                  <th style="width: 40px">
                    <input type="checkbox" id="selecionarTodos" />
                  </th>
                  <th>C√≥digo</th>
                  <th>Descri√ß√£o</th>
                  <th>Fornecedor/Marca</th>
                  <th>Comiss√£o üëÅÔ∏è</th>
                  <th>R$ Tabela</th>
                  <th>Pre√ßo Final</th>
                  <th>Qtde</th>
                  <th>Qtde. Faturada</th>
                  <th>Total R$</th>
                </tr>
              </thead>
              <tbody id="pedidoItensList">
                <tr>
                  <td colspan="10" class="empty-state">
                    Nenhum produto adicionado neste pedido!
                  </td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <td colspan="9" style="text-align: right; font-weight: bold">
                    Total:
                  </td>
                  <td
                    id="tabelaTotalPedido"
                    style="font-weight: bold; text-align: right"
                  >
                    0,00
                  </td>
                </tr>
              </tfoot>
            </table>
          </div>
        </section>

        <!-- Totais do Pedido -->
        <section class="card">
          <h3>Totais do Pedido</h3>

          <div class="totals-grid">
            <div class="totals-column">
              <div class="total-item">
                <span class="total-label">Qtde. Itens</span>
                <span class="total-value" id="totalItens">0,00</span>
              </div>
              <div class="total-item">
                <span class="total-label">Qtde Produtos</span>
                <span class="total-value" id="totalProdutos">0,00</span>
              </div>
              <div class="total-item">
                <span class="total-label">Total Peso L√≠quido</span>
                <span class="total-value" id="totalPesoLiquido">0,000 Kg</span>
              </div>
              <div class="total-item">
                <span class="total-label">Total IPI</span>
                <span class="total-value" id="totalIPI">R$ 0,00</span>
              </div>
            </div>

            <div class="totals-column">
              <div class="total-item">
                <span class="total-label">Acr√©scimo</span>
                <span class="total-value" id="totalAcrescimo">R$ 0,00</span>
              </div>
              <div class="total-item">
                <span class="total-label">Total Peso Bruto</span>
                <span class="total-value" id="totalPesoBruto">0,000 Kg</span>
              </div>
              <div class="total-item">
                <span class="total-label">Total S/ Impostos</span>
                <span class="total-value" id="totalSemImpostos">R$ 0,00</span>
              </div>
            </div>

            <div class="totals-column">
              <div class="total-item">
                <span class="total-label">Frete</span>
                <span class="total-value" id="totalFrete">R$ 0,00</span>
              </div>
              <div class="total-item">
                <span class="total-label">Desconto</span>
                <span class="total-value" id="totalDesconto">R$ 0,00</span>
              </div>
              <div class="total-item">
                <span class="total-label">Total ST</span>
                <span class="total-value" id="totalST">R$ 0,00</span>
              </div>
              <div class="total-item highlight">
                <span class="total-label"><strong>Total Final</strong></span>
                <span class="total-value"
                  ><strong id="totalFinal">R$ 0,00</strong></span
                >
              </div>
            </div>
          </div>

          <div class="frete-calculator">
            <h4>Calcular % Frete</h4>
            <div class="grouped three">
              <label>
                Valor do Frete (R$)
                <input
                  type="number"
                  id="valorFrete"
                  min="0"
                  step="0.01"
                  value="0"
                />
              </label>
              <label>
                Acr√©scimo (R$)
                <input
                  type="number"
                  id="valorAcrescimo"
                  min="0"
                  step="0.01"
                  value="0"
                />
              </label>
              <label>
                Desconto (R$)
                <input
                  type="number"
                  id="valorDesconto"
                  min="0"
                  step="0.01"
                  value="0"
                />
              </label>
            </div>
          </div>
        </section>

        <!-- Informa√ß√µes Complementares -->
        <section class="card">
          <h3>Informa√ß√µes Complementares</h3>

          <div class="grouped two">
            <label>
              Condi√ß√£o de Pagamento
              <div style="display: flex; gap: 0.5rem">
                <textarea
                  id="pedidoCondicaoPagamento"
                  rows="2"
                  placeholder="Inclua algum produto no Pedido"
                  style="flex: 1"
                ></textarea>
                <button
                  type="button"
                  id="copiarCondicao"
                  class="button-secondary"
                  style="padding: 0.5rem"
                  title="Copiar condi√ß√£o"
                >
                  üìã
                </button>
              </div>
            </label>
            <label>
              Tipo
              <select id="pedidoTipo">
                <option value="pedido">Pedido</option>
                <option value="orcamento">Or√ßamento</option>
                <option value="cotacao">Cota√ß√£o</option>
              </select>
            </label>
          </div>

          <div class="grouped two">
            <label class="checkbox-label">
              <input type="checkbox" id="pedidoCancelado" />
              Cancelado
            </label>
            <label>
              Vendedor *
              <select id="pedidoVendedor" required>
                <option value="">Selecione</option>
                <option value="guilherme">Guilherme</option>
                <option value="vendedor1">Vendedor 1</option>
                <option value="vendedor2">Vendedor 2</option>
              </select>
            </label>
          </div>

          <div class="grouped one">
            <label>
              Status
              <select id="pedidoStatus">
                <option value="">Selecione</option>
                <option value="pendente">Pendente</option>
                <option value="aprovado">Aprovado</option>
                <option value="faturado">Faturado</option>
                <option value="separacao">Em Separa√ß√£o</option>
                <option value="transporte">Em Transporte</option>
                <option value="entregue">Entregue</option>
                <option value="cancelado">Cancelado</option>
              </select>
            </label>
          </div>

          <label>
            Observa√ß√µes
            <textarea
              id="pedidoObservacoes"
              rows="3"
              placeholder="Informa√ß√µes sobre o pedido, condi√ß√µes especiais..."
            ></textarea>
          </label>

          <label>
            Observa√ß√£o Privada
            <textarea
              id="pedidoObservacaoPrivada"
              rows="2"
              placeholder="Anota√ß√µes internas (n√£o aparece no pedido)"
            ></textarea>
          </label>

          <label>
            Endere√ßo de Entrega
            <textarea
              id="pedidoEnderecoEntrega"
              rows="3"
              placeholder="Endere√ßo completo de entrega..."
            ></textarea>
          </label>

          <div class="grouped three">
            <label>
              Fator Cubagem (Kg/m3)
              <input
                type="number"
                id="pedidoFatorCubagem"
                min="0"
                step="0.01"
                placeholder="Ex: 300"
              />
            </label>
            <label>
              N¬∫ Ordem de Compra
              <input
                type="text"
                id="pedidoOrdemCompra"
                placeholder="N√∫mero da OC"
              />
            </label>
            <label>
              N¬∫ Pedido ERP
              <input
                type="text"
                id="pedidoNumeroERP"
                placeholder="N√∫mero do pedido no ERP"
              />
            </label>
          </div>
        </section>

        <!-- A√ß√µes finais -->
        <section class="card">
          <div class="hero-actions">
            <button type="submit">Salvar Pedido</button>
            <a href="pedidos.html" class="button button-secondary">Cancelar</a>
          </div>
        </section>
      </form>
    </main>

    <footer>
      Garanta que os clientes e produtos estejam cadastrados para criar pedidos
      completos.
    </footer>

    <script src="assets/js/app.js" defer></script>
  </body>
</html>
